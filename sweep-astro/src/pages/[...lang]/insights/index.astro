---
import { defaultLocale } from '@/i18n/config';
import {
  fetchInsightsListPage,
  fetchSinglePageStaticPaths,
} from '@/lib/fetchCMSData';
import { createSinglePageStaticPaths } from '@/scripts/utils-static-paths';
import InsightsList from '@/templates/ArticlesList.astro';

export async function getStaticPaths() {
  return createSinglePageStaticPaths(
    await fetchSinglePageStaticPaths('/insights')
  );
}

const { lang = defaultLocale } = Astro.params;
const data = await fetchInsightsListPage(lang);
---

<InsightsList postType="insights" data={data} lang={lang} />
