---
import { defaultLocale } from '@/i18n/config';
import {
  fetchNewsroomListPage,
  fetchNewsroomTagsStaticPaths,
} from '@/lib/fetchCMSData';
import { createPagesStaticPaths } from '@/scripts/utils-static-paths';
import ArticlesList from '@/templates/ArticlesList.astro';

export const getStaticPaths = async () => {
  const paths = await fetchNewsroomTagsStaticPaths();
  return createPagesStaticPaths(paths, {
    paramKey: 'newsroom_tag',
    paramValueType: 'slug',
  });
};

const { lang = defaultLocale, newsroom_tag: tag } = Astro.params;
const data = await fetchNewsroomListPage(lang, { tag });
---

<ArticlesList postType="newsroom" data={data} lang={lang} tag={tag} />
