---
import {
  fetchCustomersPage,
  fetchSinglePageStaticPaths,
} from '@/lib/fetchCMSData';
import { initializeStore } from '@/scripts/store';
import { defaultLocale } from '@/i18n/config';
import { createSingleDefaultPageStaticPaths } from '@/scripts/utils-static-paths';
import DefaultPage from '@/templates/DefaultPage.astro';
import { customersCaseStudiesStore } from '@/stores/customersCaseStudiesStore';

export async function getStaticPaths() {
  const pages = await fetchSinglePageStaticPaths('customers');
  const sp = createSingleDefaultPageStaticPaths(pages);

  return sp;
}

const { lang = defaultLocale } = Astro.params;

const data = await fetchCustomersPage(lang);

initializeStore(customersCaseStudiesStore, {
  isCustomersPage: true,
  lang,
  paged: 1,
  tag: undefined,
  data,
});
---

<DefaultPage data={data} />
