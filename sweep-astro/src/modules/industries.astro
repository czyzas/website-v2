---
import type {
  ComponentIndustriesListFragment,
  ModulesModulesContentIndustriesLayout,
} from '@/__generated__/cms';
import IndustriesList from '@/components/IndustriesList.astro';
import ModuleContainer from '@/components/ModuleContainer.astro';
import Container from '@/components/ui/Container.astro';
import type { WithModuleMeta } from '@/types';

type Props = WithModuleMeta<ModulesModulesContentIndustriesLayout>;

const {
  __meta__,
  layoutName,
  backgroundColor,
  show = 'all',
  selectedIndustries: rawSelectedIndustries,
} = Astro.props;

const showSelected = show === 'selected';
const selectedIndustries =
  rawSelectedIndustries?.nodes as unknown as ComponentIndustriesListFragment[];
---

<ModuleContainer meta={__meta__} name={layoutName!} bg={backgroundColor}>
  <Container>
    <IndustriesList
      industries={showSelected ? selectedIndustries : undefined}
    />
  </Container>
</ModuleContainer>
