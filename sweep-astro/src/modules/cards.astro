---
import type { ModulesModulesContentCardsLayout } from '@/__generated__/cms';
import CardsGrid from '@/components/CardsGrid.astro';
import ModuleContainer from '@/components/ModuleContainer.astro';
import Container from '@/components/ui/Container.astro';
import type { WithModuleMeta } from '@/types';

type Props = WithModuleMeta<ModulesModulesContentCardsLayout>;

const {
  __meta__,
  layoutName,
  backgroundColor,
  cards: rawCards,
  columns: stringifiedColumns = '1',
} = Astro.props;

const cards = rawCards ? rawCards.filter(Boolean) : [];
const columns = Number(stringifiedColumns);
---

{
  cards.length > 0 && (
    <ModuleContainer meta={__meta__} name={layoutName!} bg={backgroundColor}>
      <Container>
        <CardsGrid columns={columns} cards={cards} />
      </Container>
    </ModuleContainer>
  )
}
