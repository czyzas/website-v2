---
import type { ModulesModulesContentLogosLayout } from '@/__generated__/cms';
import ButtonContainer from '@/components/ButtonContainer.astro';
import LogosCollection from '@/components/LogosCollection.astro';
import LogosGrid from '@/components/LogosGrid.astro';
import ModuleContainer from '@/components/ModuleContainer.astro';
import WordpressButtonLink from '@/components/WordpressButtonLink.astro';
import Container from '@/components/ui/Container.astro';
import { linkShouldRender } from '@/scripts/data-parsers/parseLink';

type Props = ModulesModulesContentLogosLayout;

const {
  layoutName,
  backgroundColor,
  layout = 'cards',
  columns = '4',
  ctaButton,
  logos: rawLogos,
} = Astro.props;

const logos = rawLogos?.edges.filter(Boolean) ?? [];
---

{
  logos.length > 0 ? (
    <ModuleContainer name={layoutName!} bg={backgroundColor}>
      <Container>
        {layout === 'cards' && (
          <LogosGrid columns={parseInt(columns)} logos={logos} />
        )}
        {layout === 'collection' && <LogosCollection logos={logos} />}
        {linkShouldRender(ctaButton) && (
          <ButtonContainer class="mt-8 md:mt-12">
            <WordpressButtonLink data={ctaButton} arrow />
          </ButtonContainer>
        )}
      </Container>
    </ModuleContainer>
  ) : null
}
