---
import ModulesIncluder from '@/components/ModulesIncluder.astro';
import Top from '@/components/partials/Top.astro';
import Layout from '@/layouts/Layout.astro';
import type {
  DefaultPageQuery,
  IndustrySingleQuery,
} from '@/__generated__/cms';
import type { ColumnSizes } from '@/types';
import { initializeStores } from '@/scripts/utils-store-helpers';

interface Props {
  data: DefaultPageQuery | IndustrySingleQuery;
}
const { data } = Astro.props;
const page = data.page!;

initializeStores(data);

const { subpageSettings } = page;

const title = subpageSettings?.customTitle || page?.title || '';
const content = subpageSettings?.introduction ?? '';
const image = subpageSettings?.image;
const link = subpageSettings?.topButtonLink;
const size = subpageSettings?.topDistribution ?? '5-7';
---

<Layout name="default">
  <Top
    title={title}
    content={content}
    image={image}
    size={size as ColumnSizes}
    link={link}
    class="py-25"
  />
  <ModulesIncluder data={page?.modules} />
</Layout>
