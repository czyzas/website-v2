---
import Layout from '@/layouts/Layout.astro';
import { cmsStore } from '@/stores/cmsStore';
import { initializeStore } from '@/scripts/store';
import Hero from '@/components/homepage-sections/Hero.astro';
import CaseStudies from '@/components/homepage-sections/CaseStudies.astro';
import Customers from '@/components/homepage-sections/Customers.astro';
import Demo from '@/components/homepage-sections/Demo.astro';
import Goals from '@/components/homepage-sections/Goals.astro';
import Industries from '@/components/homepage-sections/Industries.astro';
import Partners from '@/components/homepage-sections/Partners.astro';
import Platform from '@/components/homepage-sections/Platform.astro';
import Resources from '@/components/homepage-sections/Resources.astro';
import WhoWeWorkWith from '@/components/homepage-sections/WhoWeWorkWith.astro';
import { languageStore } from '@/stores/languageStore';
import Regulations from '@/components/homepage-sections/Regulations.astro';
import type { HomepageQuery } from '@/__generated__/cms';
import { cleanArray } from '@/scripts/cleanArray';

interface Props {
  data: HomepageQuery;
}

const { data } = Astro.props;

initializeStore(cmsStore, {
  uri: '/',
  homepage: data.page!,
  homepageInsights: data.insights!,
  primaryMenu: data.primaryMenu!,
  themeOptions: data.themeOptionsByLang!,
});
initializeStore(languageStore, {
  currentLanguage: data.page!.language!,
  languages: data.languages,
  translations: cleanArray(data.page?.translations),
});
---

<Layout home name="homepage" pageTitle={data.page?.title ?? ''}>
  <Hero />
  <Goals />
  <Customers type={1} />
  <Platform />
  <Regulations />
  <WhoWeWorkWith />
  <Industries />
  <CaseStudies />
  <Resources />
  <Partners />
  <Customers type={2} />
  <Demo />
</Layout>
