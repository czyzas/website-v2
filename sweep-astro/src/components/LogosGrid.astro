---
import type { HTMLAttributes } from 'astro/types';
import type { UnparsedImage } from '@/scripts/data-parsers/parseImage';
import { cn } from '@/scripts/cn';
import type { WithAttributes } from '@/types';
import WordpressImage from './WordpressImage.astro';
import Card from './ui/Card.astro';
import Grid from './ui/Grid.astro';

type Props = WithAttributes<
  {
    columns?: number;
    logos?: UnparsedImage[];
  } & HTMLAttributes<'div'>
>;

const { class: className, columns = 4, logos = [], ...props } = Astro.props;

const columnClassName: Record<number, string> = {
  1: cn('col-span-full'),
  2: cn('col-span-full xs:col-span-6'),
  3: cn('col-span-full xs:col-span-6 md:col-span-4'),
  4: cn('col-span-full xs:col-span-6 md:col-span-4 lg:col-span-3'),
};
---

{
  logos.length > 0 && (
    <Grid {...props} class={cn('logos-grid', className)}>
      {logos.map((logo) => (
        <Card
          class={cn(
            'customer-logo p-6 flex items-center justify-center',
            columnClassName?.[columns] ?? 'col-span-full'
          )}
        >
          <WordpressImage
            data={logo}
            class="max-h-full max-w-full object-contain"
          />
        </Card>
      ))}
    </Grid>
  )
}
