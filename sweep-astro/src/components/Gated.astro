---
import { fetchHubspotForm } from '@/lib/fetchHubspotForm';
import { getOptions } from '@/scripts/utils-store-helpers';
import ClientGated from './Gated';

type Props = {
  formName?: string;
};
const { formName } = Astro.props;
const options = getOptions();
const { gatedFormGuid, title, overline } = options.gatedContent;
const form = gatedFormGuid ? await fetchHubspotForm(gatedFormGuid) : undefined;
---

{
  !!gatedFormGuid && !!form && (
    <ClientGated
      guid={gatedFormGuid}
      form={form}
      formName={formName}
      title={title}
      overline={overline}
      client:load
    >
      <slot />
    </ClientGated>
  )
}
