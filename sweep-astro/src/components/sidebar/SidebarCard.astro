---
import { Icon } from 'astro-icon/components';
import type { WithAttributes } from '@/types';
import { cn } from '@/scripts/cn';
import Card from '../ui/Card.astro';

interface SidebarCardProps {
  name?: string;
  title?: string;
  collapsible?: boolean;
}

type Props = WithAttributes<SidebarCardProps>;

const { title, collapsible = false, name } = Astro.props;

const Wrapper = collapsible ? 'details' : Fragment;
const Heading = collapsible ? 'summary' : 'div';
---

<Card class={cn(name, 'p-0', { collapsible })}>
  <Wrapper class="group">
    {
      (collapsible || (!collapsible && title)) && (
        <Heading
          class={cn(
            'typography-small-box-title px-6 py-4 uppercase text-sw-sky-400',
            {
              'pb-3': !collapsible,
              'flex cursor-pointer items-center justify-between group-open:pb-3':
                collapsible,
            }
          )}
        >
          {title}
          {collapsible && (
            <Icon
              name="caret-down"
              class="transform text-base text-sw-text-subdued group-open:rotate-180"
            />
          )}
        </Heading>
      )
    }
    <div class={cn('content px-6 pb-4', { 'pt-4': !title })}>
      <slot />
    </div>
  </Wrapper>
</Card>
