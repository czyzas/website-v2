---
import { Image } from 'astro:assets';
import { cmsStore } from '@/stores/cmsStore';
import { getStore } from '@/scripts/store';
import { parseLink } from '@/scripts/data-parsers/parseLink';
import { parseImage } from '@/scripts/data-parsers/parseImage';
import Container from '../ui/Container.astro';
import Button from '../ui/Button.astro';
import Grid from '../ui/Grid.astro';

const store = getStore(cmsStore);
const data = store.homepage!;
const acf = data.homepage!.hero!;

const button = parseLink(acf.button);
const image = parseImage(acf.image);
---

<section class="hero pt-[6.4375rem] pb-8">
  <Container>
    <Grid>
      <div
        class="col-span-12 md:col-span-4 flex flex-col items-start justify-center gap-4"
      >
        <h1 class="typography-h1" set:html={acf.title ?? 'Sweep'} />
        <div class="typography-body" set:html={acf?.content ?? ''} />
        {
          button.shouldRender && (
            <Button asLink href={button.url} target={button.target}>
              {button.title}
            </Button>
          )
        }
      </div>
      <div class="col-span-12 md:col-start-6 md:col-end-13">
        {
          image.shouldRender && (
            <Image
              src={image.url}
              alt={image.alt}
              width={image.width}
              height={image.height}
              loading="eager"
            />
          )
        }
      </div>
    </Grid>
  </Container>
</section>
