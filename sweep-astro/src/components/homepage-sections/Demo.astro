---
import { cmsStore } from '@/stores/cmsStore';
import { getStore } from '@/scripts/store';
import { parseLink } from '@/scripts/data-parsers/parseLink';
import Container from '../ui/Container.astro';
import Button from '../ui/Button.astro';
import Grid from '../ui/Grid.astro';
import WordpressImage from '../ui/WordpressImage.astro';

const store = getStore(cmsStore);
const data = store.homepage!;
const acf = data.homepage!.demo!;

const button = parseLink(acf.button);
---

<section class="demo py-12 md:py-20 bg-sw-surface-subdued">
  <Container>
    <Grid
      class="bg-sw-sea-500 rounded-lg p-6 md:p-14 grid-cols-1 md:grid-cols-12 gap-8 md:gap-5"
    >
      <div class="contents lg:block lg:col-span-6">
        <h2
          class="col-span-full text-white typography-h3 md:text-5xl md:leading-tight md:font-bold"
          set:html={acf.title}
        />
        {
          button.shouldRender && (
            <div class="col-span-full lg:mt-2 order-3 lg:order-none">
              <Button
                asLink
                href={button.url}
                target={button.target}
                class="w-full md:w-auto"
              >
                {button.title}
              </Button>
            </div>
          )
        }
      </div>
      <div
        class="col-span-full lg:col-span-6 flex items-center justify-center order-2 lg:order-none"
      >
        <WordpressImage data={acf.image} />
      </div>
    </Grid>
  </Container>
</section>
