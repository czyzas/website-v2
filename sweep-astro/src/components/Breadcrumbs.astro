---
import { Icon } from 'astro-icon/components';
import type { UnparsedLink } from '@/scripts/data-parsers/parseLink';
import BreadcrumbsItem from './BreadcrumbsItem.astro';

interface Props {
  breadcrumbs: [...UnparsedLink[], string];
}

const { breadcrumbs } = Astro.props;
---

{
  breadcrumbs.length > 0 && (
    <ul class="breadcrumbs flex items-center gap-1 text-xs uppercase">
      {breadcrumbs.map((breadcrumb, index) => {
        if (!breadcrumb) return null;

        const isLast = typeof breadcrumb === 'string';
        const title = isLast ? breadcrumb : breadcrumb.title;

        return (
          <>
            {index > 0 && (
              <li role="presentation">
                <Icon name="caret-right" width={14} height={14} />
              </li>
            )}
            <li>
              <BreadcrumbsItem
                url={!isLast ? breadcrumb.url : undefined}
                last={isLast}
              >
                {title}
              </BreadcrumbsItem>
            </li>
          </>
        );
      })}
    </ul>
  )
}
