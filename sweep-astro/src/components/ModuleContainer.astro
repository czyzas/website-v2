---
import type { HTMLAttributes } from 'astro/types';
import type { ModulesModulesContentBackgroundColor } from '@/__generated__/cms';
import { parseBgColor } from '@/scripts/data-parsers/parseBgColor';
import type { WithAttributes } from '@/types';
import { cn } from '@/scripts/cn';
import Section from './ui/Section.astro';

type Props = WithAttributes<
  {
    name: string;
    bg?: ModulesModulesContentBackgroundColor;
    padding?: boolean;
  } & HTMLAttributes<'div'>
>;

const { name, bg, padding = true, ...props } = Astro.props;
---

<style>
  section.module {
    @apply py-12;
    @media screen(md) {
      @apply py-20;
    }
  }

  section.module.section-title {
    &:not(.with-bottom-padding) {
      @apply pb-0;
    }

    &.display-as-overline {
      @apply pt-2.5;
    }

    & + section.module:not(.no-padding) {
      @apply pt-12;
    }
  }

  section.module.no-padding {
    @apply p-0;
  }
</style>

<Section
  {...props}
  padding={false}
  name={`module ${name}`}
  bg={bg ? parseBgColor(bg) : 'none'}
  class={cn({ 'no-padding': !padding })}
>
  <slot />
</Section>
