query EventsListPage(
  $LANG: String!
  $TAG_SLUG: [String]
  $PAGED: Int = 1
  $POSTS_PER_PAGE: Int = 6
) {
  page: pageByLang(uri: "events", lang: $LANG) {
    ...EssentialPage
    articlesListAcf {
      ...ArticlesListAcf
    }
  }
  articles: events(
    where: {
      status: PUBLISH
      language: $LANG
      categorySlug: $TAG_SLUG
      metaKey: "event_date"
      metaType: DATE
      orderby: { order: DESC, field: META_VALUE }
      pagination: { postsPerPage: $POSTS_PER_PAGE, paged: $PAGED }
    }
  ) {
    nodes {
      ...EventListItem
    }
    pageInfo {
      pagination {
        totalPages
      }
    }
  }
  filterTags: eventCategories(
    first: 100
    where: { language: $LANG, hideEmpty: true }
  ) {
    nodes {
      name
      slug
    }
  }
  moreArticles: insights(
    where: {
      status: PUBLISH
      language: $LANG
      pagination: { postsPerPage: 4, paged: 1 }
    }
  ) {
    nodes {
      ...InsightsListItem
    }
  }
  ...Essential
}

query EventSinglePage($URI: String!, $LANG: String!) {
  page: eventByLang(uri: $URI, lang: $LANG) {
    __typename
    title
    slug
    uri
    eventAcf {
      eventDate
      eventLanguage
      eventLocation
      registerFormTitle {
        selectSectionTitle {
          customStyle
          displayAs
          headline
          headlineType
          overline
          textUnder
        }
      }
      enableRegistration
      registerFormGuid
      formName
    }
    categories: eventCategories(first: 1) {
      nodes {
        name
      }
    }
    tags: eventTags {
      nodes {
        name
        tagTaxonomyAcf {
          tagColor
        }
      }
    }
    language {
      ...Languages
    }
    translations {
      languageCode
      uri
    }
    subpageSettings {
      ...SubpageSettings
    }
    seo {
      ...Seo
    }
    modules {
      ...ModulesCollection
    }
  }
  articles: events(
    where: {
      status: PUBLISH
      language: $LANG
      metaKey: "event_date"
      metaType: DATE
      orderby: { order: DESC, field: META_VALUE }
      pagination: { postsPerPage: 4, paged: 1 }
    }
  ) {
    nodes {
      ...EventListItem
    }
  }
  ...Essential
}

fragment EventListItem on Event {
  __typename
  title
  uri
  eventAcf {
    eventDate
  }
  subpageSettings {
    introduction
    image {
      ...Image
    }
  }
  categories: eventCategories(first: 1) {
    nodes {
      name
    }
  }
  tags: eventTags {
    nodes {
      name
      tagTaxonomyAcf {
        tagColor
      }
    }
  }
}
